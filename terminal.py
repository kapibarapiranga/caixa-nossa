#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon Aug 26 10:44:41 2024

@author: Kapibara Pirãga
"""
from datetime import date

'''
TESTE
saldo = 100
extrato = [[date(1970, 1, 1), 0.0, 0.0],[date(1970, 1, 1), 10.0, 10.0],[date(1970, 1, 1), 100.0, 110.0],[date(1970, 2, 10), -60.0, 50.0],[date(1970, 5, 1), 50.0, 100.0]]
'''

# VARIÁVEIS E CONSTANTES
LIMITE_SAQUE = 500
LIMITE_NUM_SAQUES = 3
BOAS_VINDAS = "\n\n\nSeja Bem-Vindo ao Terminal do Banco Nosso S.A."
ERRO = " operação inválida "
                         
saldo = 0
extrato = []
num_saques = 0

menu_msg = """
Selecione a Opção Desejada:

[d] Depositar
[s] Sacar
[e] Extrato
[q] Sair

=> """

# FUNÇÔES
def menu():
    while True:
        print(BOAS_VINDAS)
        opcao = input(menu_msg)
        
        if opcao == "d":
            print("Depósito")
            deposito_valor = float(input("Digite o valor que deseja depositar: "))
            deposito(deposito_valor)
        
        elif opcao == "s":
            print("Sacar")
            saque()
    
        elif opcao == "e":
            print("Extrato")
            imprime_extrato()
        
        elif opcao == "q":
            print("Sair")
            break
        
        else:
            print(ERRO.upper().center(47, "="))


def deposito(valor):
    global saldo
    saldo += valor
    
    data = date.today()
    extrato.append([data, valor, saldo])

def saque():
    global saldo
    global num_saques
    data = date.today()
    
    data_ultimo_saque = extrato[-1][0]
    if data_ultimo_saque != data:
        num_saques = 0
    
    if num_saques < 3:
        saque_valor = float(input("Digite o valor que deseja sacar: "))
        
        if saque_valor <= LIMITE_SAQUE:
            if saque_valor <= saldo:
                saldo -= saque_valor
                
                print(f"Foi realizado um saque no valor de R$ {saque_valor:.2f}.\nO saldo atual da conta é R$ {saldo:.2f}")
                saque_valor *= -1
                extrato.append([data, saque_valor, saldo])
                num_saques += 1
            else:
                print("Saldo em conta insuficiente para esta operação.")
        else:
            print(f"O valor máximo para esta operação é de R$ {LIMITE_SAQUE:.2f}")
    else:
        print("Limite de saques excedido para o dia de hoje")
            
def imprime_extrato():
    n = 0
    titulo = "==Lançamento___________Saldo=="
   
    for entrada in extrato:
        dia = entrada[0]
        
        if n == 0:
            print(str(dia).center(30, "_"))
            print(titulo)
            print(f"R$ {entrada[1]:.2f}\t\t\t\tR$ {entrada[2]:.2f}")
            
            ultima_entrada = dia
            n = 1
        else:
            if dia == ultima_entrada:
                print(f"R$ {entrada[1]:.2f}\t\t\t\tR$ {entrada[2]:.2f}")
            else:
                print(str(dia).center(30, "_"))
                print(titulo)
                print(f"R$ {entrada[1]:.2f}\t\t\t\tR$ {entrada[2]:.2f}")
                ultima_entrada = dia
    
    print(30 * "_")
    print(f"SALDO\t\t\t\t\tR$ {saldo:.2f}")
                    
        
    

        
        

# LOGOTIPO DO BANCO
logo = '''
----------------------------------------++++++-------+++++------------------------------------------
------------------------------------+++---------------------+++-------------------------------------
---------------------------------++-----------++-++------------+++----------------------------------
-------------------------------++------+---+--+--+-++++-+---------++--------------------------------
-----------------------------++-----++-++---------------++-+++-------+------------------------------
---------------------------++------+-+------------------------++++----++----------------------------
--------------------------+------++---------++++++++++++--------+--+----++--------------------------
-------------------------+----+-+-------+++--------------++-------++------+-------------------------
------------------------+-------------++--------------------++-------------+------------------------
-----------------------+------------+-------------------------++------------+-----------------------
-----------------------++++++++++++------------------------------+++++++++++++----------------------
------------------------++++-+++-----++++++++--+++++++++++++-+++++----+++++++-----------------------
---------------------++##+#+-+###+----++##++---+#+##+-++###+-++#++----+####+------------------------
--------------------+####++----##+---+-+###+----####+--+###+++#+-----+-+###+------------------------
--------------------#####+-----++----#++###+----####+---++##+++------++-+###+-----------------------
-------------------+####++----------+#+-+###+---####+-----+###------+#+-+###+-----------------------
-------------------+#+##+-----------+++-+##++---####+----+++#++-----+#+-+####+----------------------
--------------------+#+##+------++-+#++##+###+--##+#+--++#+++##++--+#++######+----------------------
---------------------+###++---++#+++++---+###+++#+##+-+##+--+####++##+---+###++---------------------
-----------------------++##+++#+++####-+##################++##########+-+######+--------------------
----------------------------------------------------------------------------------------------------
-----------------------++++++++++++-----------------------------++++++++++++++----------------------
-----------------------+------------++------------------------++------------+-----------------------
------------------------+------++-----++--------------------++-------+-----+------------------------
-------------------------+-----++++------++--------------++------+-------++-------------------------
--------------------------+-------+----------++++++++++----------+------++--------------------------
---------------------------++------++-+--------------------+++++------++----------------------------
-----------------------------++-------+--+---------------+-+--------++------------------------------
-------------------------------++-----------+-++--++-+++++--------++--------------------------------
---------------------------------+++---------------------------++-----------------------------------
------------------------------------+++--------------------+++--------------------------------------
-----------------------------------------++++++----+++++++------------------------------------------
'''

print(logo)

menu()